(this["webpackJsonpreact-flask-app"]=this["webpackJsonpreact-flask-app"]||[]).push([[0],{52:function(e,a,t){e.exports=t(66)},59:function(e,a,t){},64:function(e,a,t){},65:function(e,a,t){},66:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(15),o=t.n(s),l=t(19),i=t.n(l),c=t(10),u=t(11),h=t(26),m=t(13),p=t(12),d=(t(59),t(91)),f=t(93),g=t(96),v=t(95),y=t(94),b=t(29),C=t.n(b),E=t(30),k=t.n(E),B=function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).chartRef0=r.a.createRef(),n.chartRef1=r.a.createRef(),n.chartRef2=r.a.createRef(),n.updateLineChart0=function(){console.log(12345),console.log(Object(h.a)(n)),console.log(n.state);var e=n.chartRef0.current.getContext("2d");if(n.state.ifOverview&&n.state.ifCases)new i.a(e,{type:"line",data:{labels:n.state.dataGottenBack[0].data.map((function(e){return e.date})).reverse(),datasets:[{data:n.state.dataGottenBack[0].data.map((function(e){return e.newCasesByPublishDate})).reverse()}]},options:{scales:{xAxes:[{type:"time",distribution:"series"}]}}})},n.updateLineChart1=function(){console.log(n.state);var e=n.chartRef1.current.getContext("2d");new i.a(e,{type:"line",data:{labels:n.state.dataGottenBack[1].data.map((function(e){return e.date})).reverse(),datasets:[{data:n.state.dataGottenBack[1].data.map((function(e){return e.covidOccupiedMVBeds})).reverse()}]},options:{scales:{xAxes:[{type:"time",distribution:"series"}]}}})},n.updateLineChart2=function(){var e=n.state.dataGottenBack[0].data.map((function(e){return{x:e.date,y:e.newCasesByPublishDate}})),a=n.state.dataGottenBack[1].data.map((function(e){return{x:e.date,y:e.covidOccupiedMVBeds}}));console.log(e),console.log(n.state);var t=n.chartRef2.current.getContext("2d");new i.a(t,{type:"scatter",data:{labels:n.state.dataGottenBack[0].data.map((function(e){return e.date})).reverse(),datasets:[{label:"Chart 0",data:e,fill:!1,borderColor:"rgba(0, 200, 0, 1)"},{label:"Chart 1",data:a,fill:!1,borderColor:"rgba(150, 50, 48, 1)"}]},options:{tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest"},scales:{yAxes:[{display:!0,labelString:"Frequency (Hz)",ticks:{beginAtZero:!0}}],xAxes:[{type:"time",distribution:"series"}]}}})},n.state={dataGottenBack:[],getDataForChart:"",areaType:"",areaName:"",chart0Title:"Daily Cases:",chart1Title:"Patients in ventilation beds:",chart2Title:"Chart with results together for first two:",ifOverview:!0,ifCases:!0,ifDeaths:!1,ifTesting:!1,ifHospital:!1,urlForChart0:"https://api.coronavirus-staging.data.gov.uk/v1/data?filters=areaName=United%2520Kingdom;areaType=overview&structure=%7B%22areaType%22:%22areaType%22,%22areaName%22:%22areaName%22,%22areaCode%22:%22areaCode%22,%22date%22:%22date%22,%22newCasesByPublishDate%22:%22newCasesByPublishDate%22,%22cumCasesByPublishDate%22:%22cumCasesByPublishDate%22%7D&format=json"},n}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({areaName:this.props.areaName,areaType:this.props.areaType,ifOverview:this.props.ifOverview,ifCases:this.props.ifCases,ifDeaths:this.props.ifDeaths,ifTesting:this.props.ifTesting,ifHospital:this.props.ifHospital}),this.state.ifOverview?fetch("https://api.coronavirus-staging.data.gov.uk/v1/data?filters=areaName=United%2520Kingdom;areaType=overview&structure=%7B%22areaType%22:%22areaType%22,%22areaName%22:%22areaName%22,%22areaCode%22:%22areaCode%22,%22date%22:%22date%22,%22newCasesByPublishDate%22:%22newCasesByPublishDate%22,%22cumCasesByPublishDate%22:%22cumCasesByPublishDate%22%7D&format=json").then((function(e){return e.json()})).then((function(a){var t=e.state.dataGottenBack.concat(a);e.setState({dataGottenBack:t,getDataForChart:e.props.getDataForChart},(function(){e.updateLineChart0()}))})):(this.setState({getDataForChart:"no"}),fetch("https://api.coronavirus-staging.data.gov.uk/v1/data?filters=areaType=nation;areaName=England&structure=%7B%22areaType%22:%22areaType%22,%22areaName%22:%22areaName%22,%22areaCode%22:%22areaCode%22,%22date%22:%22date%22,%22newCasesBySpecimenDate%22:%22newCasesBySpecimenDate%22,%22cumCasesBySpecimenDate%22:%22cumCasesBySpecimenDate%22%7D&format=json").then((function(e){return e.json()})).then((function(a){var t=e.state.dataGottenBack.concat(a);e.setState({dataGottenBack:t,getDataForChart:e.props.getDataForChart},(function(){e.updateLineChart0()}))}))),fetch("https://api.coronavirus-staging.data.gov.uk/v1/data?filters=areaName=United%2520Kingdom;areaType=overview&structure=%7B%22areaType%22:%22areaType%22,%22areaName%22:%22areaName%22,%22areaCode%22:%22areaCode%22,%22date%22:%22date%22,%22covidOccupiedMVBeds%22:%22covidOccupiedMVBeds%22%7D&format=json").then((function(e){return e.json()})).then((function(a){var t=e.state.dataGottenBack.concat(a);e.setState({dataGottenBack:t},(function(){e.updateLineChart1(),e.updateLineChart2()}))}))}},{key:"componentDidUpdate",value:function(e){this.props.areaName!==e.areaName&&(console.log(23423942),this.setState({areaName:this.props.areaName}))}},{key:"render",value:function(){var e=this.state;e.data,e.labels;return console.log(this.state),r.a.createElement("div",null,r.a.createElement("div",null,this.state.areaName),r.a.createElement(d.a,null,r.a.createElement(f.a,{title:this.state.chart0Title,action:r.a.createElement(y.a,{"aria-label":"settings"},r.a.createElement(C.a,null))}),r.a.createElement(v.a,null,r.a.createElement("canvas",{id:"myChart0",ref:this.chartRef0})),r.a.createElement(g.a,null,r.a.createElement(y.a,{"aria-label":"settings"},r.a.createElement(k.a,null)))),r.a.createElement(d.a,null,r.a.createElement(f.a,{title:this.state.chart1Title,action:r.a.createElement(y.a,{"aria-label":"settings"},r.a.createElement(C.a,null))}),r.a.createElement(v.a,null,r.a.createElement("canvas",{id:"myChart1",ref:this.chartRef1})),r.a.createElement(g.a,null,r.a.createElement(y.a,{"aria-label":"settings"},r.a.createElement(k.a,null)))),r.a.createElement(d.a,null,r.a.createElement(f.a,{title:this.state.chart2Title,action:r.a.createElement(y.a,{"aria-label":"settings"},r.a.createElement(C.a,null))}),r.a.createElement(v.a,null,r.a.createElement("canvas",{id:"myChart2",ref:this.chartRef2})),r.a.createElement(g.a,null,r.a.createElement(y.a,{"aria-label":"settings"},r.a.createElement(k.a,null)))))}}]),t}(n.Component),D=(t(64),t(65),t(100)),O=t(97),N=t(98),S=t(31),w=t(101),T=t(44),j=t.n(T),L=Object(w.a)((function(){return{typographyStyles:{flex:1},heightOfThis:{height:45}}})),x=function(){var e=L();return r.a.createElement(O.a,{className:e.heightOfThis,position:"static"},r.a.createElement(N.a,null,r.a.createElement(S.a,{className:e.typographyStyles},"COVID-19 Observer"),r.a.createElement(j.a,null)))},G=t(45),A=t(23),F=t.n(A),P={height:"75vh",flex:1},I=function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={center:[54.7023545,-3.2765753],locationStart:e.props.locationStart},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.map=F.a.map("map",{center:this.state.center,zoom:5,layers:[F.a.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'})]}),this.layer=F.a.layerGroup().addTo(this.map),this.updateMarkers(this.props.markersData)}},{key:"componentDidUpdate",value:function(e){var a=e.markersData,t=e.locationStart;this.props.markersData!==a&&this.updateMarkers(this.props.markersData),console.log("testing000"),this.state.center!==t&&(console.log("not equal"),console.log(this.props.locationStart),this.updateLocation(this.props.latOfArea,this.props.lonOfArea,this.props.locationStart))}},{key:"updateMarkers",value:function(e){var a=this;this.layer.clearLayers(),e.forEach((function(e){F.a.marker(e.latLng,{title:e.title}).addTo(a.layer)}))}},{key:"updateLocation",value:function(e,a,t){var n=6;this.layer.clearLayers(),console.log(this.props.locationStart),this.props.locationStart&&this.props.locationStart.includes("United Kingdom")&&(n=5),console.log(n),this.map.setView([e,a],n)}},{key:"render",value:function(){return r.a.createElement("div",{id:"map",style:P})}}]),t}(r.a.Component),M=function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).handleLangChange=function(){n.props.onSelectLanguage("test"),console.log("done")},n.addMarker=function(){var e=n.state.markersData,a=e[e.length-1];n.setState({markersData:[].concat(Object(G.a)(e),[{title:+a.title+1,latLng:{lat:a.latLng.lat+1e-4,lng:a.latLng.lng+1e-4}}])}),console.log(e),n.handleLangChange()},n.state={markersData:[{title:1,latLng:{lat:49.8419,lng:24.0315}},{title:2,latLng:{lat:49.842,lng:24.0316}}],selectedCode:"",selectedLanguage:3,areaName:e.areaName},n}return Object(u.a)(t,[{key:"render",value:function(){var e=this.state,a=e.markersData,t=(e.areaName,""),n="";return this.props.dataGottenBackFromAPI[0]&&(t=this.props.dataGottenBackFromAPI[0].lat,n=this.props.dataGottenBackFromAPI[0].lon),console.log(this),r.a.createElement("div",null,r.a.createElement(I,{className:"mappedOfClass",markersData:a,locationStart:this.props.areaName,latOfArea:t,lonOfArea:n}),r.a.createElement("button",{onClick:this.props.onSelectLanguage},"Testingofbutton"))}}]),t}(r.a.Component),R=t(4),U=t(102),H=t(99);function K(e){return r.a.createElement(S.a,{component:"div",style:{padding:24}},e.children)}var V=function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={Tabvalue:0,thisGraphData:[]},e.handleChange=function(a,t){e.setState({Tabvalue:t})},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.open&&this.setState({Tabvalue:this.props.open})}},{key:"render",value:function(){var e=this.props.classes,a=this.state.Tabvalue;return console.log(this.props.areaName),r.a.createElement("div",{className:e.root},r.a.createElement(O.a,{position:"static"},r.a.createElement(U.a,{value:a,onChange:this.handleChange,variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example"},r.a.createElement(H.a,{label:"Overview"}),r.a.createElement(H.a,{label:"Charts"}),r.a.createElement(H.a,{label:"Cases"}),r.a.createElement(H.a,{label:"Hospitalised"}),r.a.createElement(H.a,{label:"Testing"}),r.a.createElement(H.a,{label:"Deaths"}),r.a.createElement(H.a,{label:"Forecasting"}))),0===a&&r.a.createElement(K,null,this.props.areaName," Overview"),1===a&&r.a.createElement(K,null,r.a.createElement(B,{getDataForChart:this.props.areaName,ifOverview:1,ifCases:1,areaName:this.props.areaName})),2===a&&r.a.createElement(K,null,"Cases"),3===a&&r.a.createElement(K,null,"Hospitalised"),4===a&&r.a.createElement(K,null,"Testing"),5===a&&r.a.createElement(K,null,"Deaths"),6===a&&r.a.createElement(K,null,"Forecasting"))}}]),t}(r.a.Component),q=Object(R.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}))(V),z=function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={language:"",areaName:"United Kingdom",search:"",dataForSearch:["United Kingdom","England","Northern Ireland","Scotland","Wales"],dataGottenBackFromAPI:[]},e.handleLanguage=function(a){e.setState({language:"blah",areaName:""})},e.handleAreaName=function(a){console.log("handleAreaName"),e.setState({areaName:a})},e}return Object(u.a)(t,[{key:"updateSearch",value:function(e){console.log(e.target.value),this.setState({search:e.target.value.substr(0,20)})}},{key:"displayTextBox",value:function(){return r.a.createElement("input",{placeholder:"Search",type:"text",value:this.state.search,onChange:this.updateSearch.bind(this)})}},{key:"clickedPlace",value:function(e){var a=this,t=e.currentTarget.innerHTML;console.log(t);var n="https://nominatim.openstreetmap.org/search?q="+t+",%20United%20Kingdom";console.log(n),fetch(n+"&format=json").then((function(e){return e.json()})).then((function(e){a.setState({dataGottenBackFromAPI:[]},(function(){console.log("cleared")}));var n=a.state.dataGottenBackFromAPI.concat(e[0]);a.setState({dataGottenBackFromAPI:n,areaName:t},(function(){console.log(a.state)}))})),console.log(this)}},{key:"render",value:function(){var e=this,a=this.state.dataForSearch.filter((function(a){return-1!==a.toLowerCase().indexOf(e.state.search.toLowerCase())}));return r.a.createElement(D.a,{container:!0,direction:"column"},r.a.createElement(D.a,{item:!0},r.a.createElement(x,null)),r.a.createElement(D.a,{item:!0,container:!0},r.a.createElement(D.a,{item:!0,xs:2,sm:2,md:2},r.a.createElement("div",null,"Search for the region you want",this.displayTextBox(),a.map((function(a,t){return r.a.createElement("li",{onClick:e.clickedPlace.bind(e),key:t}," ",a," ")})))),r.a.createElement(D.a,{item:!0,xs:10,sm:5,md:5},r.a.createElement(M,{areaName:this.state.areaName,onSelectLanguage:this.handleLanguage,dataGottenBackFromAPI:this.state.dataGottenBackFromAPI}),"Test test test test test test test test test test test test test test test test test test test test test test test"),r.a.createElement(D.a,{item:!0,xs:12,sm:5,md:5},r.a.createElement(q,{handleAreaName:this.handleAreaName,areaName:this.state.areaName,dataGottenBackFromAPI:this.state.dataGottenBackFromAPI}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.97695f05.chunk.js.map